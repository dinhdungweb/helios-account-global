{% comment %}
  Snippet: Account Hero Section
  Usage: {% render 'account-hero', customer: customer, tier: tier, points: points, total_spent: total_spent, progress_percentage: progress_percentage, next_tier: next_tier, remaining_amount: remaining_amount %}
{% endcomment %}

<div class="account-hero">
  <div class="hero-bg"></div>
  <div class="hero-content account-container">
    <div class="hero-profile-flex">
      <div class="hero-identity">
        <div class="hero-avatar">
            <div class="avatar-ring"></div>
            <div class="avatar-img" style="background-image: url('https://cdn.shopify.com/s/files/1/0644/2958/8701/files/464413022_945803257578038_2084379289906124096_n.jpg?v=1764122552');"></div>
        </div>
        <div class="hero-text">
          <div class="hero-name">{{ customer.name }}</div>
          <div class="hero-email">{{ customer.email }}</div>
          <div class="hero-tier-badge">{{ tier }} TIER</div>
        </div>
      </div>

      <div class="hero-stats-container">
        <div class="hero-stats-grid">
          <div class="stat-item">
            <span class="stat-label">Total Spent</span>
            <span class="stat-value">
                ${{ total_spent | number_with_delimiter: ',' }}
            </span>
          </div>
          <div class="stat-item">
             <span class="stat-label">Rewards Points</span>
             {%- assign formatted_points = points | floor | split: '' | reverse -%}
             {%- assign formatted_points_str = '' -%}
             {%- for digit in formatted_points -%}
               {%- assign remainder = forloop.index0 | modulo: 3 -%}
               {%- if remainder == 0 and forloop.index0 != 0 -%}
                 {%- assign formatted_points_str = formatted_points_str | append: '.' -%}
               {%- endif -%}
               {%- assign formatted_points_str = formatted_points_str | append: digit -%}
             {%- endfor -%}
             <span class="stat-value" id="heroPointsDisplay" data-points="{{ points | default: 0 }}">{{ formatted_points_str | split: '' | reverse | join: '' }}</span>
          </div>
        </div>

        <div class="hero-progress-wrapper">
          <div class="progress-info">
             <span>Tier Progress</span>
             <span>{{ progress_percentage }}%</span>
          </div>
          <div class="hero-progress-bar">
            <div class="hero-progress-fill" style="width: {{ progress_percentage }}%;"></div>
          </div>
          <p class="hero-next-tier-msg">
            {% if tier == "BLACK DIAMOND" %}
              You have reached the highest tier!
            {% else %}
               Spend <strong>${{ remaining_amount | number_with_delimiter: ',' }}</strong> more to reach <strong>{{ next_tier }}</strong>
            {% endif %}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
